---
layout: single
published: true
title:  "[네트워크] Network 기초 "
categories: network
date: 2024-01-02 21:55:47
toc: true
toc_sticky: true
tag:   
  - network
  - 쿠키
  - 세션
  - 오르미
  - 이스트소프트

---

보통 서버가 클라이언트 인증을 확인하는 방식으로 크게 쿠키, 세션, 토큰 3가지 방식이 있습니다. 쿠키는 클라이언트측에 정보를 저장하는 반면, 세션은 서버 측에 정보를 저장합니다. 이외에도 각각의 특징과 장단점에 대해서 알아봅시다.

---

## 1.  쿠키

쿠키는 Key-Value 형식으로 구성되어있는 문자열 묶음입니다. 클라이언트가 어떤 웹사이트를 방문했을 때 HTTP 헤더에 포함되어 전송되고 이때 클라이언트의 브라우저에 설치되는 작은 정보 파일입니다. 이렇게 각 사용자마다 브라우저에 정보를 저장하기 때문에 고유 정보 식별이 가능합니다.
쿠키의 특징들을 살펴볼게요.

- 쿠키의 크기는 최대 4KB
- 쿠키는 HTTP 헤더에 포함되어 전송되기 때문에 전송 속도가 빠릅니다.
- 보안에 취약합니다. 쿠키는 클라이언트의 웹 브라우저에 저장되기 때문에 변조될 가능성이 있습니다.

### 쿠키 인증방식

![image](https://github.com/BaxDailyGit/BaxDailyGit/assets/99312529/a34ec87d-aeaf-409d-a2e5-4b5c03b4561c)
<span style="color:gray; display: block; text-align: right;">출처 : 이스트소프트 조성연</span>

1. 클라이언트가 서버에 요청을 보내면 서버는 클라이언트의 요청에 대한 응답을 작성할 때 클라이언트에 저장하고 싶은 정보를 헤더(Set-cookie)에 담습니다. 
2. 클라이언트는 요청을 보낼 때 마다 매번 저장된 쿠키를 요청 헤더의 Set-Cookie에 담아 보냅니다. 
3. 이때 서버는 쿠키에 담긴 정보를 바탕으로 해당 요청의 클라이언트가 누군지 식별 가능합니다. 


![image](https://github.com/BaxDailyGit/BaxDailyGit/assets/99312529/11a33194-ebe8-4ef2-9850-4ad664ef13f0)

우리가 검색창에 관심가는 키워드로 검색을 했을 때, 인스타그램이나 페이스북에서 내가 검색했던 정보가 나오는 것을 본 적이 있을겁니다. 우리의 브라우저에 쿠키값이 남아있기 때문에 서버는 클라이언트가 누구고 어떤 것에 관심을 갖고있는지를 알고있습니다. 그래서 SNS에 각종 개인 맞춤형 광고가 뜨기도 하죠. 

## 2. 세션

위에서 본 것 처럼, 쿠키의 보안적 이슈 때문에 세션은 비밀번호같이 클라이언트의 민감한 인증 정보를 브라우저가 아닌 서버측에 저장하고 관리합니다. 즉, 세션은 서버측에 저장되는 데이터입니다. 
세션을 사용해서 사용자의 로그인 상태를 유지하거나, 사용자의 장바구니 정보를 저장할 수도 있습니다. 세션의 특징을 살펴볼게요.

- 쿠키에 비해 크기가 큽니다. 크기에 제한이 없기 때문입니다.
- 전송 속도가 느립니다.
- 보안이 비교적 안전합니다. 세션은 서버에 저장되기 때문에 변조되거나 도난될 가능성은 적습니다.

세션 객체는 다음과 같은 형태로 이루어져있습니다. 


![image](https://github.com/BaxDailyGit/BaxDailyGit/assets/99312529/04cf39c6-8d02-4df4-9bb7-a019e7bb7db9)
<span style="color:gray; display: block; text-align: right;">출처 : 이스트소프트 조성연</span>

### 세션 인증 방식

![image](https://github.com/BaxDailyGit/BaxDailyGit/assets/99312529/e3b38cfe-2894-4c85-b1d9-56bee73d679c)
<span style="color:gray; display: block; text-align: right;">출처: inpa dev tistory</span>

1. 사용자가 웹브라우저 에서 로그인을 하게되면 세션이 서버의 데이터베이스에 저장합니다. 이때, 세션을 식별하기 위한 Session ID를 기준으로 정보를 저장하게되죠.
2. 서버에서는 브라우저의 쿠키에 Session ID를 저장합니다. 쿠키에 정보가 담겨져있기 때문에 브라우저는 해당 사이트에 대한 모든 Request에 Session ID를 쿠키에 담아 전송합니다.
3. 서버는 클라이언트가 보낸 Session ID와 서버 메모리로 관리하고 있는 Session ID를 비교하여 인증을 수행합니다. 

## 3. 쿠키와 세션의 사용 예

쿠키와 세션은 다양한 어플리케이션에서 사용됩니다. 다음 사용 예시를 보시죠.

- 로그인 상태 유지
- 장바구니 정보 저장
    - 세션을 사용하여 사용자의 장바구니 정보를 저장할 수 있습니다. 사용자는 쇼핑을 하면서 장바구니에 상품을 추가하고, 다음번에 동일한 웹사이트를 방문할 때 세션을 사용하여 장바구니 정보를 유지할 수 있습니다.
- 개인화
    - 쿠키를 사용하여 사용자의 선호도를 저장할 수 있습니다. 예를 들어, 사용자가 특정 웹 사이트를 방문할 때마다 쿠키를 사용하여 사용자의 언어 설정이나 글꼴 크기 등을 저장할 수 있습니다.
  