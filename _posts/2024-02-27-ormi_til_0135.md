---
layout: single
published: true
title:  "[DB] 정규화"
categories: Database
date: 2024-02-27 20:58:14
toc: true
toc_sticky: true
tag:   
  - 데이터베이스
  - Database
  - 정규화
---

## 정규화(Normalization)란?

데이터베이스 정규화(Normalization)는 데이터의 구조를 최적화하는 과정입니다. 데이터의 중복을 최소화하는데 목적이 있습니다.

간단한 예시를 살펴보겠습니다. 한 회사의 제품 주문 데이터베이스가 있다고 가정해봅시다.

### 정규화 전

주문 테이블에는 주문 번호, 제품 이름, 제품 제조사, 고객 이름, 고객 주소가 있습니다.

| 주문번호 | 제품이름 | 제품제조사 | 고객이름 | 고객주소 |
| --- | --- | --- | --- | --- |
| 1 | 노트북 | 삼성전자 | 오르미 | 서울 |
| 2 | 노트북 | 엘지전자 | 내리미 | 부산 |
| 3 | TV | 삼성전자 | 오르미 | 서울 |
| 4 | TV | 엘지전자 | 내리미 | 부산 |

제품 이름, 제품 제조사, 고객 이름, 고객 주소 모두 중복된 값이 있는걸 확인할 수 있습니다.

### 정규화 후

데이터의 중복을 없애기위해 테이블을 3개로 분리하였습니다.

1. 주문 테이블

| 주문번호 | 고객번호 | 제품번호 |
| --- | --- | --- |
| 1 | 1 | 1 |
| 2 | 2 | 2 |
| 3 | 1 | 3 |
| 4 | 2 | 4 |

1. 제품 테이블

| 제품번호 | 제품이름 | 제품제조사 |
| --- | --- | --- |
| 1 | 노트북 | 삼성전자 |
| 2 | 노트북 | 엘지전자 |
| 3 | TV | 삼성전자 |
| 4 | TV | 엘지전자 |

1. 고객 테이블

| 고객번호 | 고객이름 | 고객주소 |
| --- | --- | --- |
| 1 | 오르미 | 서울 |
| 2 | 내리미 | 부산 |

주문 테이블의 열(column) 개수가 5개에서 3개로 줄어들었습니다. 그리고 제품 정보와 고객 정보가 모두 번호로 대체되었습니다. 정규화 전에 중복으로 존재하던 제품 이름, 고객 이름 등도 사라졌습니다. **만약 정규화를 하지 않았다면 주문이 늘어날 때마다 동일한 제품 이름, 제품 제조사 값이 계속해서 생겨났을 것입니다**. 

고객 정보와 제품 정보는 고객 테이블, 제품 테이블로 분리하였습니다. 각 테이블은 특정 주제에만 집중한다고 생각해주시면 됩니다. 만약, 특정 주문의 고객 정보를 알고 싶다면 주문 테이블과 고객 테이블을 조인하면 됩니다.

## 정규화의 장점

### **1. 일관성**

정규화된 테이블은 각 테이블이 하나의 목적을 가지고 있기 때문에 데이터를 더 쉽게 관리할 수 있습니다. 데이터를 수정하거나 삭제할 때 오류가 발생할 가능성이 줄어들고, 데이터의 일관성을 유지하기가 더 쉬워집니다.

### **2. 유연성**

데이터 구조를 변경하거나 새로운 요구 사항을 쉽게 수용할 수 있습니다. 새로운 속성이나 테이블을 추가하는데 더 유연하며, 변경 사항이 다른 부분에 미치는 영향을 최소화합니다.

### **3. 저장 공간 최적화**

정규화로 저장 공간을 효율적으로 사용할 수 있습니다. 중복 데이터가 제거되므로 데이터 크기를 줄일 수 있고, 저장 공간과 관련된 비용을 절감할 수 있습니다.

요약하자면 데이터를 관리하기 쉬워지고, 새로운 요구 사항에 유연하게 대응할 수 있고, 저장 공간의 비용을 절감하기위해 정규화를 사용한다고 할 수 있습니다.

## 정규화의 종류

정규화는 `제 1 정규화, 제 2 정규화, 제 3 정규화, BCNF 정규화, 제 4 정규화, 제 5 정규화`로 나누어집니다. 제 1 정규화에서 제 5 정규화으로 갈 수록 더 엄격한 제약 조건이 있지만, 상황에 따라 적절한 정규화을 선택하는 것이 중요합니다.

보통 실무에서의 정규화는 `제 3 정규화`까지를 의미합니다. 여기서는 실무에서 주로 활용하는 `1 정규화` ~ `3 정규화`을 알아보겠습니다.

### **제 1 정규화 (1NF)**

각 열(column)이 하나의 값을 가지게 하는 과정입니다.

원본 데이터

| 주문번호 | 제품명 | 제품구성 |
| --- | --- | --- |
| 1 | 노트북 | CPU, RAM, SSD |
| 2 | 스마트폰 | CPU, RAM, 배터리 |
| 3 | 스마트워치 | CPU, 배터리 |

제품 구성을 열(column)을 보면 하나의 열에 CPU, RAM 등 여러 개의 값을 가지고 있습니다. 제 1 정규화 과정을 거치면 아래와 같이 바뀝니다.

정규화된 데이터

| 주문번호 | 제품명 | 제품구성 |
| --- | --- | --- |
| 1 | 노트북 | CPU |
| 1 | 노트북 | RAM |
| 1 | 노트북 | SSD |
| 2 | 스마트폰 | CPU |
| 2 | 스마트폰 | RAM |
| 2 | 스마트폰 | 배터리 |
| 3 | 스마트워치 | CPU |
| 3 | 스마트워치 | 배터리 |

제품 구성 열(column)은 단 하나의 값만 가지게 됩니다.

### **제 2 정규화 (2NF)**

제 2 정규화는 테이블의 비주요 속성이 기본키에 대해 완전 함수 종속되도록 하는 것입니다. 간단하게 설명하면, **모든 열이 기본키(primary key)에 의존**해야 한다는 것을 의미합니다.

현재 테이블의 주제와 관련없는 컬럼을 다른 테이블로 분리하는 작업이 이루어집니다.

원본 데이터

| 주문번호 | 제품명 | 제조사 |
| --- | --- | --- |
| 1 | 노트북 | 삼성전자 |
| 2 | 스마트폰 | 엘지전자 |
| 3 | 스마트워치 | 애플 |

정규화된 데이터

1. 주문 테이블

| 주문번호 | 제품명 |
| --- | --- |
| 1 | 노트북 |
| 2 | 스마트폰 |
| 3 | 스마트워치 |
1. 제품 테이블

| 제품명 | 제조사 |
| --- | --- |
| 노트북 | 삼성전자 |
| 스마트폰 | 엘지전자 |
| 스마트워치 | 애플 |

하나의 테이블은 하나의 주제를 가지도록 테이블을 분리하였습니다. 완전 함수 종속도 만족하는데, 예를 들어 제품 테이블에서는 제품명이 기본키(primary key)이며, 다른 열(제조사)은 제품명에 종속됩니다.

### **제 3 정규화 (3NF)**

제2 정규화를 완료한 테이블에서 이행적 함수 종속성을 제거하는 과정입니다. 이행적 함수 종속이란 A -> B 종속, B -> C 종속, A -> C 종속인 관계를 말합니다.
즉, 일반 컬럼에만 종속된 컬럼은 다른 테이블로 빼는것이 제3 정규화 입니다.

원본 데이터

| 주문번호 | 고객명 | 주소 | 제품명 | 제품 카테고리 |
| --- | --- | --- | --- | --- |
| 1 | 오르미 | 서울 | 노트북 | 전자제품 |
| 2 | 내리미 | 부산 | 스마트폰 | 전자제품 |
| 3 | 하늘별 | 제주 | 카메라 | 전자제품 |

이행적 종속 관계를 그림으로 나타내면 아래와 같습니다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/e8f11927-b70c-4524-9227-a3efac08e7aa/d67fcbe5-de48-467e-b0d9-ceb9d723f5ec/Untitled.png)

제품명은 주문번호에 종속되어 있고, 제품 카테고리는 제품명에 종속되어 있습니다. 따라서 제품 카테고리는 주문번호에 종속되어 있다고 할 수 있습니다. 이러한 종속 관계를 끊어내기위해 주문과 제품 정보는 별도의 테이블로 분리합니다.

마찬가지로 주문과 고객 정보도 별도의 테이블로 분리합니다.

정규화된 데이터

1. 주문 테이블

| 주문번호 | 고객명 | 제품명 |
| --- | --- | --- |
| 1 | 오르미 | 노트북 |
| 2 | 내리미 | 스마트폰 |
| 3 | 하늘별 | 카메라 |
1. 제품 테이블

| 제품명 | 제품 카테고리 |
| --- | --- |
| 노트북 | 전자제품 |
| 스마트폰 | 전자제품 |
| 카메라 | 전자제품 |
1. 고객 테이블

| 고객명 | 주소 |
| --- | --- |
| 오르미 | 서울 |
| 내리미 | 부산 |
| 하늘별 | 제주 |

이렇게 각 테이블이 하나의 주제를 가지도록 분리함으로써 제 3 정규화를 수행하였습니다.